import streamlit as st
from services.api_client import api_client
from components.tables import render_reference_table

# –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏
st.set_page_config(
    page_title="Medical Analysis System",
    page_icon="üè•",
    layout="wide",
    initial_sidebar_state="expanded"
)

# –ó–∞–≥–æ–ª–æ–≤–æ–∫
st.title("üè• –°–∏—Å—Ç–µ–º–∞ –ú–µ–¥–∏—á–Ω–æ–≥–æ –ê–Ω–∞–ª—ñ–∑—É")
st.markdown("---")

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ backend
st.sidebar.title("üîß –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–∏")
health = api_client.health_check()

if health.get('status') == 'ok':
    st.sidebar.success(f"‚úÖ Backend –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ")
    st.sidebar.json(health)
else:
    st.sidebar.error(f"‚ùå Backend –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π")
    st.sidebar.error(health.get('message', 'Unknown error'))

# –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
st.markdown("""
## –©–æ —Ä–æ–±–∏—Ç—å —Å–∏—Å—Ç–µ–º–∞:

1. **–ö–ª–∞—Å–∏—Ñ—ñ–∫—É—î —Å—Ç–∞–Ω –∑–¥–æ—Ä–æ–≤'—è** –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∞–Ω–∞–ª—ñ–∑—ñ–≤ (–Ω–æ—Ä–º–∞ / —Ä–∏–∑–∏–∫ / –ø–æ—Ç—Ä–µ–±—É—î —É–≤–∞–≥–∏)
2. **–í–∏—è–≤–ª—è—î –ø–∞—Ç–æ–ª–æ–≥—ñ—ó** —â–∏—Ç–æ–≤–∏–¥–Ω–æ—ó –∑–∞–ª–æ–∑–∏, –º–µ—Ç–∞–±–æ–ª—ñ—á–Ω—ñ –ø–æ—Ä—É—à–µ–Ω–Ω—è, –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω–∏–π –¥–∏—Å–±–∞–ª–∞–Ω—Å
3. **–ü—Ä–æ–≥–Ω–æ–∑—É—î –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å** —Ä–æ–∑–≤–∏—Ç–∫—É –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω—å
4. **–í—ñ–∑—É–∞–ª—ñ–∑—É—î** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —É –∑—Ä–æ–∑—É–º—ñ–ª–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ –¥–ª—è –ª—ñ–∫–∞—Ä—ñ–≤

---

### üìä –û–±–µ—Ä—ñ—Ç—å —Ä–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏:

üëà –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ **–Ω–∞–≤—ñ–≥–∞—Ü—ñ—é –∑–ª—ñ–≤–∞** –¥–ª—è –≤–∏–±–æ—Ä—É —Ä–µ–∂–∏–º—É:

- **üìä Single Analysis** ‚Äî –∞–Ω–∞–ª—ñ–∑ –æ–¥–Ω–æ–≥–æ –ø–∞—Ü—ñ—î–Ω—Ç–∞
- **üìÅ Batch Analysis** ‚Äî –º–∞—Å–æ–≤–∏–π –∞–Ω–∞–ª—ñ–∑ (–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è CSV)
- **üìà Statistics** ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞ –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è
""")

# –¢–∞–±–ª–∏—Ü—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Ç–Ω–∏—Ö –Ω–æ—Ä–º
render_reference_table()

# Footer
st.markdown("---")
st.markdown("""
<div style='text-align: center; color: #888;'>
    –†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –¥–ª—è –¥–∏–ø–ª–æ–º–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É | 2024
</div>
""", unsafe_allow_html=True)